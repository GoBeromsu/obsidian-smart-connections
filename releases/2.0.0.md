# 2.0.0 - Library Consolidation

## Major Changes

This release consolidates 16 separate jsbrains modules into 4 core modules, resolving circular dependencies and simplifying the codebase.

### New Library Structure

```
lib/
├── core/        # Utils, adapters, collections, fs, http, settings, view
├── models/      # Chat and embed model adapters
├── entities/    # Sources and blocks
├── environment/ # SmartEnv and notices
└── obsidian/    # Obsidian-specific integrations
```

### Improvements

- **Reduced complexity**: 16 modules → 4 modules
- **Resolved circular dependencies**: smart-model ↔ smart-chat-model, smart-entities ↔ smart-sources, etc.
- **Unified base adapter**: Single base_adapter.js replaces 9 duplicate adapter files
- **Cleaner imports**: All lib modules accessible via esbuild aliases

### Bug Fixes

- Fixed `tag.startsWith is not a function` error when frontmatter contains non-string tags
- Fixed `Cannot read properties of undefined (reading 'data')` when embed model not yet loaded

### Removed

- `src/components/connections_v1.js` (deprecated)
- `src/views/sc_private_chat.obsidian.js` (external service)
- `lib/smart-plugins-obsidian/` (unused)
